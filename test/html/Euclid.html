<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Parse Tree</title>
    <meta name="description" content="A collapsible tree layout with all of the leaf nodes at the same layer." />
    <!-- Copyright 1998-2017 by Northwoods Software Corporation. -->
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/1.8.2/go.js"></script>
    <script id="code">
        function init() {
            if (window.goSamples) goSamples();  // init for these samples -- you don't need to call this
            var $ = go.GraphObject.make;  // for conciseness in defining templates
            myDiagram =
                $(go.Diagram, "myDiagramDiv",
                    {
                        allowCopy: false,
                        allowDelete: false,
                        allowMove: false,
                        initialContentAlignment: go.Spot.Center,
                        initialAutoScale: go.Diagram.Uniform,
                        layout:
                            $(FlatTreeLayout,  // custom Layout, defined below
                                { angle: 90,
                                    compaction: go.TreeLayout.CompactionNone }),
                            "undoManager.isEnabled": true
                    });

            myDiagram.nodeTemplate =
                $(go.Node, "Vertical",
                    { selectionObjectName: "BODY" },
                        $(go.Panel, "Auto", { name: "BODY" },
                            $(go.Shape, "RoundedRectangle",
                                new go.Binding("fill"),
                                new go.Binding("stroke")),
                            $(go.TextBlock,
                                { font: "bold 12pt Arial, sans-serif", margin: new go.Margin(4, 2, 2, 2) },
                                new go.Binding("text"))
                        ),
                    $(go.Panel,  // this is underneath the "BODY"
                        { height: 15 },  // always this height, even if the TreeExpanderButton is not visible
                            $("TreeExpanderButton")
                    )
                );

            // Add arrow or not
            myDiagram.linkTemplate =
                $(go.Link, $(go.Shape, { strokeWidth: 1.5 }));
var nodeDataArray = [{ key: 1, text: "<Program>", fill: "#ccc", stroke: "black" },{ key: 2, text: "begin", fill: "#ccc", stroke: "black", parent: 1 },{ key: 3, text: "<Code>", fill: "#ccc", stroke: "black", parent: 1 },{ key: 4, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 3 },{ key: 5, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 4 },{ key: 6, text: "<Read>", fill: "#ccc", stroke: "black", parent: 5 },{ key: 7, text: "read", fill: "#ccc", stroke: "black", parent: 6 },{ key: 8, text: "(", fill: "#ccc", stroke: "black", parent: 6 },{ key: 9, text: "VarName", fill: "#ccc", stroke: "black", parent: 6 },{ key: 10, text: ")", fill: "#ccc", stroke: "black", parent: 6 },{ key: 11, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 4 },{ key: 12, text: ";", fill: "#ccc", stroke: "black", parent: 11 },{ key: 13, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 11 },{ key: 14, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 13 },{ key: 15, text: "<Read>", fill: "#ccc", stroke: "black", parent: 14 },{ key: 16, text: "read", fill: "#ccc", stroke: "black", parent: 15 },{ key: 17, text: "(", fill: "#ccc", stroke: "black", parent: 15 },{ key: 18, text: "VarName", fill: "#ccc", stroke: "black", parent: 15 },{ key: 19, text: ")", fill: "#ccc", stroke: "black", parent: 15 },{ key: 20, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 13 },{ key: 21, text: ";", fill: "#ccc", stroke: "black", parent: 20 },{ key: 22, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 20 },{ key: 23, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 22 },{ key: 24, text: "<While>", fill: "#ccc", stroke: "black", parent: 23 },{ key: 25, text: "while", fill: "#ccc", stroke: "black", parent: 24 },{ key: 26, text: "<Cond>", fill: "#ccc", stroke: "black", parent: 24 },{ key: 27, text: "<CondU>", fill: "#ccc", stroke: "black", parent: 26 },{ key: 28, text: "<CondAnd>", fill: "#ccc", stroke: "black", parent: 27 },{ key: 29, text: "<CondAndU>", fill: "#ccc", stroke: "black", parent: 28 },{ key: 30, text: "<CondAtom>", fill: "#ccc", stroke: "black", parent: 29 },{ key: 31, text: "<SimpleCond>", fill: "#ccc", stroke: "black", parent: 30 },{ key: 32, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 31 },{ key: 33, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 32 },{ key: 34, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 33 },{ key: 35, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 34 },{ key: 36, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 35 },{ key: 37, text: "VarName", fill: "#ccc", stroke: "black", parent: 36 },{ key: 38, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 34 },{ key: 39, text: "eps", fill: "#ccc", stroke: "black", parent: 38 },{ key: 40, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 32 },{ key: 41, text: "eps", fill: "#ccc", stroke: "black", parent: 40 },{ key: 42, text: "<Comp>", fill: "#ccc", stroke: "black", parent: 31 },{ key: 43, text: "<> ", fill: "#ccc", stroke: "black", parent: 42 },{ key: 44, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 31 },{ key: 45, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 44 },{ key: 46, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 45 },{ key: 47, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 46 },{ key: 48, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 47 },{ key: 49, text: "[Number]", fill: "#ccc", stroke: "black", parent: 48 },{ key: 50, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 46 },{ key: 51, text: "eps", fill: "#ccc", stroke: "black", parent: 50 },{ key: 52, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 44 },{ key: 53, text: "eps", fill: "#ccc", stroke: "black", parent: 52 },{ key: 54, text: "<CondAndV>", fill: "#ccc", stroke: "black", parent: 28 },{ key: 55, text: "eps", fill: "#ccc", stroke: "black", parent: 54 },{ key: 56, text: "<CondV>", fill: "#ccc", stroke: "black", parent: 26 },{ key: 57, text: "eps", fill: "#ccc", stroke: "black", parent: 56 },{ key: 58, text: "do", fill: "#ccc", stroke: "black", parent: 24 },{ key: 59, text: "<Code>", fill: "#ccc", stroke: "black", parent: 24 },{ key: 60, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 59 },{ key: 61, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 60 },{ key: 62, text: "<Assign>", fill: "#ccc", stroke: "black", parent: 61 },{ key: 63, text: "VarName", fill: "#ccc", stroke: "black", parent: 62 },{ key: 64, text: ":=", fill: "#ccc", stroke: "black", parent: 62 },{ key: 65, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 62 },{ key: 66, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 65 },{ key: 67, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 66 },{ key: 68, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 67 },{ key: 69, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 68 },{ key: 70, text: "VarName", fill: "#ccc", stroke: "black", parent: 69 },{ key: 71, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 67 },{ key: 72, text: "eps", fill: "#ccc", stroke: "black", parent: 71 },{ key: 73, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 65 },{ key: 74, text: "eps", fill: "#ccc", stroke: "black", parent: 73 },{ key: 75, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 60 },{ key: 76, text: ";", fill: "#ccc", stroke: "black", parent: 75 },{ key: 77, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 75 },{ key: 78, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 77 },{ key: 79, text: "<While>", fill: "#ccc", stroke: "black", parent: 78 },{ key: 80, text: "while", fill: "#ccc", stroke: "black", parent: 79 },{ key: 81, text: "<Cond>", fill: "#ccc", stroke: "black", parent: 79 },{ key: 82, text: "<CondU>", fill: "#ccc", stroke: "black", parent: 81 },{ key: 83, text: "<CondAnd>", fill: "#ccc", stroke: "black", parent: 82 },{ key: 84, text: "<CondAndU>", fill: "#ccc", stroke: "black", parent: 83 },{ key: 85, text: "<CondAtom>", fill: "#ccc", stroke: "black", parent: 84 },{ key: 86, text: "<SimpleCond>", fill: "#ccc", stroke: "black", parent: 85 },{ key: 87, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 86 },{ key: 88, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 87 },{ key: 89, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 88 },{ key: 90, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 89 },{ key: 91, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 90 },{ key: 92, text: "VarName", fill: "#ccc", stroke: "black", parent: 91 },{ key: 93, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 89 },{ key: 94, text: "eps", fill: "#ccc", stroke: "black", parent: 93 },{ key: 95, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 87 },{ key: 96, text: "eps", fill: "#ccc", stroke: "black", parent: 95 },{ key: 97, text: "<Comp>", fill: "#ccc", stroke: "black", parent: 86 },{ key: 98, text: ">=", fill: "#ccc", stroke: "black", parent: 97 },{ key: 99, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 86 },{ key: 100, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 99 },{ key: 101, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 100 },{ key: 102, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 101 },{ key: 103, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 102 },{ key: 104, text: "VarName", fill: "#ccc", stroke: "black", parent: 103 },{ key: 105, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 101 },{ key: 106, text: "eps", fill: "#ccc", stroke: "black", parent: 105 },{ key: 107, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 99 },{ key: 108, text: "eps", fill: "#ccc", stroke: "black", parent: 107 },{ key: 109, text: "<CondAndV>", fill: "#ccc", stroke: "black", parent: 83 },{ key: 110, text: "eps", fill: "#ccc", stroke: "black", parent: 109 },{ key: 111, text: "<CondV>", fill: "#ccc", stroke: "black", parent: 81 },{ key: 112, text: "eps", fill: "#ccc", stroke: "black", parent: 111 },{ key: 113, text: "do", fill: "#ccc", stroke: "black", parent: 79 },{ key: 114, text: "<Code>", fill: "#ccc", stroke: "black", parent: 79 },{ key: 115, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 114 },{ key: 116, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 115 },{ key: 117, text: "<Assign>", fill: "#ccc", stroke: "black", parent: 116 },{ key: 118, text: "VarName", fill: "#ccc", stroke: "black", parent: 117 },{ key: 119, text: ":=", fill: "#ccc", stroke: "black", parent: 117 },{ key: 120, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 117 },{ key: 121, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 120 },{ key: 122, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 121 },{ key: 123, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 122 },{ key: 124, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 123 },{ key: 125, text: "VarName", fill: "#ccc", stroke: "black", parent: 124 },{ key: 126, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 122 },{ key: 127, text: "eps", fill: "#ccc", stroke: "black", parent: 126 },{ key: 128, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 120 },{ key: 129, text: "<OpAdd>", fill: "#ccc", stroke: "black", parent: 128 },{ key: 130, text: "-", fill: "#ccc", stroke: "black", parent: 129 },{ key: 131, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 128 },{ key: 132, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 131 },{ key: 133, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 132 },{ key: 134, text: "VarName", fill: "#ccc", stroke: "black", parent: 133 },{ key: 135, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 131 },{ key: 136, text: "eps", fill: "#ccc", stroke: "black", parent: 135 },{ key: 137, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 128 },{ key: 138, text: "eps", fill: "#ccc", stroke: "black", parent: 137 },{ key: 139, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 115 },{ key: 140, text: "eps", fill: "#ccc", stroke: "black", parent: 139 },{ key: 141, text: "done", fill: "#ccc", stroke: "black", parent: 79 },{ key: 142, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 77 },{ key: 143, text: ";", fill: "#ccc", stroke: "black", parent: 142 },{ key: 144, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 142 },{ key: 145, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 144 },{ key: 146, text: "<Assign>", fill: "#ccc", stroke: "black", parent: 145 },{ key: 147, text: "VarName", fill: "#ccc", stroke: "black", parent: 146 },{ key: 148, text: ":=", fill: "#ccc", stroke: "black", parent: 146 },{ key: 149, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 146 },{ key: 150, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 149 },{ key: 151, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 150 },{ key: 152, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 151 },{ key: 153, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 152 },{ key: 154, text: "VarName", fill: "#ccc", stroke: "black", parent: 153 },{ key: 155, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 151 },{ key: 156, text: "eps", fill: "#ccc", stroke: "black", parent: 155 },{ key: 157, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 149 },{ key: 158, text: "eps", fill: "#ccc", stroke: "black", parent: 157 },{ key: 159, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 144 },{ key: 160, text: ";", fill: "#ccc", stroke: "black", parent: 159 },{ key: 161, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 159 },{ key: 162, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 161 },{ key: 163, text: "<Assign>", fill: "#ccc", stroke: "black", parent: 162 },{ key: 164, text: "VarName", fill: "#ccc", stroke: "black", parent: 163 },{ key: 165, text: ":=", fill: "#ccc", stroke: "black", parent: 163 },{ key: 166, text: "<ExprArith>", fill: "#ccc", stroke: "black", parent: 163 },{ key: 167, text: "<ExprArithU>", fill: "#ccc", stroke: "black", parent: 166 },{ key: 168, text: "<ExprArithMul>", fill: "#ccc", stroke: "black", parent: 167 },{ key: 169, text: "<ExprArithMulU>", fill: "#ccc", stroke: "black", parent: 168 },{ key: 170, text: "<ExprArithAtom>", fill: "#ccc", stroke: "black", parent: 169 },{ key: 171, text: "VarName", fill: "#ccc", stroke: "black", parent: 170 },{ key: 172, text: "<ExprArithMulV>", fill: "#ccc", stroke: "black", parent: 168 },{ key: 173, text: "eps", fill: "#ccc", stroke: "black", parent: 172 },{ key: 174, text: "<ExprArithV>", fill: "#ccc", stroke: "black", parent: 166 },{ key: 175, text: "eps", fill: "#ccc", stroke: "black", parent: 174 },{ key: 176, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 161 },{ key: 177, text: "eps", fill: "#ccc", stroke: "black", parent: 176 },{ key: 178, text: "done", fill: "#ccc", stroke: "black", parent: 24 },{ key: 179, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 22 },{ key: 180, text: ";", fill: "#ccc", stroke: "black", parent: 179 },{ key: 181, text: "<InstList>", fill: "#ccc", stroke: "black", parent: 179 },{ key: 182, text: "<Instruction>", fill: "#ccc", stroke: "black", parent: 181 },{ key: 183, text: "<Print>", fill: "#ccc", stroke: "black", parent: 182 },{ key: 184, text: "print", fill: "#ccc", stroke: "black", parent: 183 },{ key: 185, text: "(", fill: "#ccc", stroke: "black", parent: 183 },{ key: 186, text: "VarName", fill: "#ccc", stroke: "black", parent: 183 },{ key: 187, text: ")", fill: "#ccc", stroke: "black", parent: 183 },{ key: 188, text: "<InstList'>", fill: "#ccc", stroke: "black", parent: 181 },{ key: 189, text: "end", fill: "#ccc", stroke: "black", parent: 1 },]            // create the Model with data for the tree, and assign to the Diagram
            myDiagram.model = $(go.TreeModel, { nodeDataArray: nodeDataArray });
        }

        // Customize the TreeLayout to position all of the leaf nodes at the same vertical Y position.
        function FlatTreeLayout() {
            go.TreeLayout.call(this);  // call base constructor
        }
        go.Diagram.inherit(FlatTreeLayout, go.TreeLayout);

        // This assumes the TreeLayout.angle is 90 -- growing downward
        /** @override */
        FlatTreeLayout.prototype.commitLayout = function() {
            go.TreeLayout.prototype.commitLayout.call(this);  // call base method first
            // find maximum Y position of all Nodes
            var y = -Infinity;
            this.network.vertexes.each(function(v) {
                y = Math.max(y, v.node.position.y);
            });
            // move down all leaf nodes to that Y position, but keeping their X position
            this.network.vertexes.each(function(v) {
                if (v.destinationEdges.count === 0) {
                    // shift the node down to Y
                    v.node.position = new go.Point(v.node.position.x, y);
                    // extend the last segment vertically
                    v.node.toEndSegmentLength = Math.abs(v.centerY - y);
                } else {  // restore to normal value
                    v.node.toEndSegmentLength = 10;
                }
            });
        };
        // end FlatTreeLayout

    </script>
</head>
<body onload="init()">
    <div id="sample">
        <div id="myDiagramDiv" style="width:100%; height:1000px"></div>
    </div>
</body>
</html>
